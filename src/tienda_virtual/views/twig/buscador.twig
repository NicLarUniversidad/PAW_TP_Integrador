{% extends "parts/commons.twig" %}
{% block head %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex">
    <meta charset="utf-8">
    <meta name="author" content="Nicolas Larena, Delfina Morello" />
    <meta name="description" content="Tienda virtual posee una variedad de productos a precios accesibles y competitivos, que no te podes perder. ">
    <link rel="stylesheet" type="text/css" href="css/buscador.css" />
    <script src="/js/scripts/buscador.js" ></script>
{% endblock %}

{% block main %}
    <section>
        <section class="section1">
			<img src="/img/arrow_back-24px.svg"  class="flecha-back" alt="volver a la pantalla anterior" id="flecha" onclick="history.back();">
			<h1>Resultados de la búsqueda</h1>
            <section>
                <small>Mostrando <b id="page-size">{% if data.paginatam < data.total %}  {{ data.paginatam }} {% else %} {{ data.total }} {% endif %}</b> de <b id="query-size">{{ data.total }}</b> - Página <b id="page-number">{{ data.pagina }}</b></small>
                <section>
                    <small>Ver de a: </small>
                    <select id="select-page-size">
                        <option value="6" {% if data.paginatam == 6 %} selected {% endif %}>6</option>
                        <option value="12"{% if data.paginatam == 12 %} selected {% endif %}>12</option>
                        <option value="24"{% if data.paginatam == 24 %} selected {% endif %}>24</option>
                    </select>
                    <small> publicaciones</small>
                </section>
            </section>
            <section>
                <section  class="ordenarPor" id="select-order">
                    <small>Ordenar por </small>
                    <select id="order-select">
                        <option value="0" {% if data.order == 0 %} selected {% endif %}> - </option>
                        <option value="1" {% if data.order == 1 %} selected {% endif %}>Menor precio</option>
                        <option value="2" {% if data.order == 2 %} selected {% endif %}>Mayor precio</option>
                    </select>
                </section>
            </section>
        </section>
            
    {% for publicacion in data.publicaciones %}
        <article>
            <figure>
                {% for foto in publicacion.fotografias %}
                    <picture class="hidden">
                        <img class="imagenes" src="/{{ foto.url }}" alt="{{ publicacion.producto.descripcion }}">
                    </picture>
                {% else %}
                    <picture class="hidden">
                        <img class="imagenes" src="/img/no-picture.svg" alt="Imagen no encontrada">
                    </picture>
                {% endfor %}
            </figure>
            <h2 class="nombre-producto">{{ publicacion.producto.nombre }}</h2>
            {% if publicacion.oferta is empty %}
                <div>
                <p>{{ publicacion.precio_unidad }} {{ publicacion.moneda.nombre }}</p>
                </div>
            {% else %}
                <div>
                <p class="antes">ANTES {{publicacion.precio_unidad}} {{oferta.moneda.nombre}}</p><br>
                <p>AHORA {{ publicacion.oferta.precio_oferta }} {{ publicacion.moneda.nombre }}</p>
                </div>
            {% endif %}
            <a href="/detalleproducto?publicacion={{ publicacion.id }}" id="verMas">Ver en Detalle</a><br>
            <a class="agregar" id="addToCart-{{ publicacion.id }}">Agregar</a>

        </article>
    {% else %}
        <p class="noEncontrado">No se ha encontrado productos</p>
    {% endfor %}
    </section>

{% endblock %}
{% block footer %}
{% endblock %}