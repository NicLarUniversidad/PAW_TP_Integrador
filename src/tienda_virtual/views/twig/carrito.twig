{% extends "parts/commons.twig" %}

{% block head %}
    <script src="https://www.mercadopago.com/v2/security.js" view="item"></script>
    <link rel="stylesheet" type="text/css" href="css/carrito.css" />
    <script src="/js/scripts/carrito.js" ></script>
{% endblock %}

{% block main %}

    <section>
        <a href="/carrito-cancelar" class="btn-cancelar">Cancelar compra</a>
{#        TODO: Agregar backurl#}
        <a href="{{ attribute(data.preference, "sandbox_init_point") }}" class="btn-pagar"> Pagar </a>
        <h1>Carrito</h1>
        {% for publicacion in data.publicaciones %}
        <article class="productos" id="productos">
            <picture>
                <img class="imgArticulo" alt="{{ publicacion.nombre }}" src="{{ publicacion.foto }}">
            </picture>
            <h2>{{ publicacion.nombre }}</h2>
            <p>${{ publicacion.precio_unidad }}</p>
            <button class="button-delete" onclick="myFunction()">Eliminar</button>

        </article>
    </section>

    
    <script>
            function myFunction() {
            var x = document.getElementById("productos");
            x.remove(x.selectedIndex);
            x.delete();
            node.removeChild("productos");
            }
    </script>
            
    {% else %}
        <span class="carritoVacio">Su carrito está vacio</span>
        
        <span class="seguirCompra">Para seguir comprando, navegue por las categorías en el sitio, o busque su producto.</span>
        <a href="/grupocategorias" class="inicio">Seguir comprando</a>
    {% endfor %}
    
{% endblock %}


